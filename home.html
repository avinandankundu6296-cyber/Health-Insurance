<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Home | Health Insurance App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="assets/css/style.css">

  <style>
    /* Dropdown Styling and Animations */
    select {
      transition: all 0.3s ease;
      background: linear-gradient(to right, #ffffff, #ebf4ff);
    }
    select:hover {
      border-color: #2563eb;
    }
    select:focus {
      outline: none;
      transform: scale(1.03);
      box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.3);
      border-color: #2563eb;
    }
    option {
      background-color: #fff;
      color: #1d4ed8;
      font-weight: 500;
    }

    .dropdown-wrapper:focus-within .dropdown-arrow {
      transform: rotate(180deg);
      transition: transform 0.3s ease;
    }

    #moduleList {
      transition: opacity 0.4s ease, transform 0.4s ease;
    }

    #moduleList.fade-out {
      opacity: 0;
      transform: translateY(10px);
    }
    #moduleList.fade-in {
      opacity: 1;
      transform: translateY(0);
    }
  </style>
</head>

<body class="bg-blue-50 min-h-screen">
  <!-- Navbar -->
  <nav class="bg-blue-700 text-white p-4 flex justify-between items-center sticky top-0 shadow-md z-20">
    <!-- Left Section: Title + Date + Version -->
    <div>
      <h1 class="text-2xl font-bold leading-tight">Health Insurance Portal</h1>
      <p id="systemDate" class="text-sm text-white/90 font-medium mt-1"></p>
      <p class="text-xs text-blue-100 font-semibold mt-0.5">Version 1.0.0</p>
    </div>

    <!-- Right Section -->
    <div class="flex items-center space-x-6">
      <!-- Welcome + Dropdown -->
      <div class="flex flex-col items-end">
        <p id="welcomeUser" class="font-semibold text-sm">Welcome, User</p>

        <!-- Improved Dropdown -->
        <div class="flex items-center space-x-2 mt-1 relative dropdown-wrapper">
          <label for="roleSelect" class="font-semibold text-white text-sm">Role:</label>
          <div class="relative">
            <select id="roleSelect" onchange="animatedModuleSwitch()"
                    class="appearance-none text-blue-700 bg-white font-semibold px-4 py-1.5 pr-8 rounded-lg shadow-md border border-blue-200 cursor-pointer hover:border-blue-400 focus:ring-2 focus:ring-blue-500 focus:border-blue-400 transition duration-200 text-sm">
              <option value="COPS">COPS</option>
              <option value="BOPS">BOPS</option>
              <option value="HOADMIN" selected>HOADMIN</option>
              <option value="UWR">UWR</option>
              <option value="COQC">COQC</option>
            </select>
            <i data-lucide="chevron-down" class="dropdown-arrow absolute right-2 top-1/2 -translate-y-1/2 text-blue-700 pointer-events-none w-4 h-4 transition-transform duration-300"></i>
          </div>
        </div>
      </div>

      <!-- Logout Icon -->
      <button onclick="logout()" 
              class="flex items-center justify-center bg-white text-blue-700 p-2 rounded-full hover:bg-blue-100 transition"
              title="Logout">
        <i data-lucide="log-out" class="w-5 h-5"></i>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="flex flex-row p-8 gap-10 justify-between">
    <!-- Left Info Panel -->
    <div class="flex-1 bg-white shadow-xl rounded-xl p-8 border border-blue-100">
      <h2 class="text-2xl font-semibold text-blue-700 mb-4 text-center">Welcome to Health Insurance Web App</h2>
      <p class="text-gray-600 text-center leading-relaxed">
        You are logged in as 
        <span class="text-blue-700 font-semibold" id="currentRole">HOADMIN</span>.  
        Choose a module from the right to continue.
      </p>
    </div>

    <!-- Right Side: Module Grid -->
    <div class="w-[380px] bg-white shadow-xl rounded-xl p-8 border border-blue-100">
      <div id="moduleList" class="grid grid-cols-2 gap-3">
        <!-- Modules dynamically generated -->
      </div>
    </div>
  </main>

  <script src="assets/js/main.js"></script>

  <script>
    // ðŸ—“ï¸ System Date (DD/MM/YYYY)
    function setSystemDate() {
      const now = new Date();
      const dd = String(now.getDate()).padStart(2, '0');
      const mm = String(now.getMonth() + 1).padStart(2, '0');
      const yyyy = now.getFullYear();
      document.getElementById('systemDate').textContent = `System Date: ${dd}/${mm}/${yyyy}`;
    }
    setSystemDate();

    // ðŸ‘‹ Initialize
    document.addEventListener("DOMContentLoaded", () => {
      const user = localStorage.getItem("loggedInUser") || "User";
      document.getElementById("welcomeUser").textContent = `Welcome, ${user}`;
      displayModules();
      lucide.createIcons();
    });

    // âœ¨ Animated module switch
    function animatedModuleSwitch() {
      const list = document.getElementById('moduleList');
      list.classList.add('fade-out');
      setTimeout(() => {
        displayModules();
        list.classList.remove('fade-out');
        list.classList.add('fade-in');
        setTimeout(() => list.classList.remove('fade-in'), 400);
      }, 300);
    }
  </script>
</body>
</html>
